<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Milk Dispense</title>
  <link rel="stylesheet" href="/static/apple.css">

  <script>
    function fetchRFID() {
      fetch("/api/rfid/latest")
        .then(r => r.json())
        .then(d => {
          if (d.uid) {
            document.getElementById("uid").value = d.uid;
          }
        });
    }
    setInterval(fetchRFID, 800);
  </script>
</head>

<body>

<header>
  <h1>Milk Dispense</h1>
  <p>Qualityâ€‘based pricing system</p>
</header>

<div class="container">

  <div class="nav">
    <a href="/">Home</a>
    <a href="/ui/recharge">Recharge</a>
    <a href="/transactions">History</a>
  </div>

  <div class="card">
    <form method="POST" action="/milk">

      <label>RFID Card</label>
      <input
        id="uid"
        name="uid"
        placeholder="Scan your card"
        readonly
        required
      >

      <label>Volume</label>
      <div style="display: flex; gap: 10px;">
        <button type="button" onclick="selectVolume('250')">250mL</button>
        <button type="button" onclick="selectVolume('500')">500mL</button>
        <button type="button" onclick="selectVolume('1000')">1L</button>
      </div>

      <label>SNF</label>
      <input type="number" step="0.1" name="snf" required>

      <label>Water Content</label>
      <input type="number" step="0.1" name="water" required>

      <button type="submit">Dispense Milk</button>
    </form>
  </div>

</div>

<script>
  function selectVolume(volume) {
    document.querySelector('input[name="volume"]').value = volume / 1000; // Convert mL to L
  }
</script>

</body>
</html>
